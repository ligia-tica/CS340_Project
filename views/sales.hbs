{{!--
Citation for the following code:
Date: 11/4/2025 (various additional dates)
Base code used from Exploration - Web Application Technology and Exploration Implementing CUD Operations in your app
URL: https://canvas.oregonstate.edu/courses/2017561/pages/exploration-web-application-technology-2?module_item_id=25645131
URL: https://canvas.oregonstate.edu/courses/2017561/pages/exploration-implementing-cud-operations-in-your-app?module_item_id=25645149
Onsubmit code from Microsoft Copilot Prompt: How do I add a confirmation message in the form tag of my hbs file?
--}}


<h1>Sales</h1>

{{!-- READ table --}}
<table>
    <thead>
        <tr>
            {{#each sales.[0]}}
            <th>{{@key}}</th>
            {{/each}}
        </tr>
    </thead>
    <tbody>
        {{#each sales}}
        <tr>
            <td>{{this.idSale}}</td>
            <td>{{this.passCategory}}</td>
            <td>{{this.employeeName}}</td>
            <td>{{this.passesSold}}</td>
            <td>{{this.saleDate}}</td>
        </tr>
        {{/each}}
    </tbody>
</table>

{{!-- CREATE form --}}
<h2>Add a Sale</h2>
<form class='cuForm' id='create_sale_form' action='/sales/create' method='POST'
    onsubmit="return confirm('Are you sure you want to create this sale?');">

    <label for='create_sale_passes_sold'>Passes Sold:</label>
    <input type='number' name='create_sale_passes_sold' id='create_sale_passes_sold' min='1' required />

    <label for='create_sale_sale_date'>Sale Date:</label>
    <input type='date' name='create_sale_date' id='create_sale_sale_date' required />

    <label for='create_sale_pass_id'>Pass:</label>
    <select name='create_sale_pass_id' id='create_sale_pass_id' required>
        <option value='' disabled selected>Select a Pass</option>
        {{#each passes}}
        <option value='{{this.idPass}}'>{{this.category}}</option>
        {{/each}}
    </select>

    <label for='create_sale_employee_id'>Employee:</label>
    <select name='create_sale_employee_id' id='create_sale_employee_id' required>
        <option value='' disabled selected>Select an Employee</option>
        {{#each employees}}
        <option value='{{this.idEmployee}}'>{{this.firstName}} {{this.lastName}}</option>
        {{/each}}
    </select>

    <input type='submit' />
</form>

{{!-- UPDATE form --}}
<h2>Update a Sale</h2>
<form class='cuForm' id='update_sale_form' action='/sales/update' method='POST'
    onsubmit="return confirm('Are you sure you want to update this sale?');">

    <label for='update_sale_id'>Sale to Update:</label>
    <select name='update_sale_id' id='update_sale_id' required>
        <option value='' disabled selected>Select a Sale</option>
        {{#each sales}}
        <option value='{{this.idSale}}'>{{this.idSale}}</option>
        {{/each}}
    </select>

    <label for='update_sale_passes_sold'>New Passes Sold:</label>
    <input type='number' name='update_sale_passes_sold' id='update_sale_passes_sold' min='0' required />

    <label for='update_sale_date'>New Sale Date:</label>
    <input type='date' name='update_sale_date' id='update_sale_date' required />

    <label for='update_sale_pass_id'>New Pass Type:</label>
    <select name='update_sale_pass_id' id='update_sale_pass_id' required>
        <option value='' disabled selected>Select a Pass</option>
        {{#each passes}}
        <option value='{{this.idPass}}'>{{this.category}}</option>
        {{/each}}
    </select>

    <label for='update_sale_employee_id'>New Employee:</label>
    <select name='update_sale_employee_id' id='update_sale_employee_id' required>
        <option value='' disabled selected>Select an Employee</option>
        {{#each employees}}
        <option value='{{this.idEmployee}}'>{{this.firstName}} {{this.lastName}}</option>
        {{/each}}
    </select>

    <input type='submit' />
</form>
